{% extends "base.html" %}
{% block script %}
<script>
(function poll(){
    console.log('Polling...');
    setTimeout(function () {
        $.ajax({ url: "get_trade_and_order", timeout: 100, success: function(data){
        console.log('Success. Here is the data:');
        $('#order_book').html(data['order_book_html']);
        $('#trade_history').html(data['trade_history_html']);
    }, dataType: "json", complete: poll});
  }, 1000);
})();
</script>
{% endblock %}
{% block content %} 
<form method="post">{% csrf_token %}
<table>
{{ trade_form }}
</table>
<input type="submit" value="Submit" />
</form>

<h1>Trade History</h1>
<table id='trade_history' cellpadding="8">
{% include 'trade_history.html' %}
</table>

<h1>Order Book</h1>
<table id='order_book' cellpadding="4">
{% include 'order_book.html' %}
</table>
{% endblock %}
